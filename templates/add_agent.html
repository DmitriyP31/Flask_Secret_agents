<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–í–µ—Ä–±–æ–≤–∫–∞</title>
    <<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1>–í–ï–†–ë–û–í–ö–ê –ù–û–í–û–ì–û –ê–ì–ï–ù–¢–ê</h1>
        <form action="/add" method="POST" class="agent-form" novalidate>
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <label>–ö–æ–¥–æ–≤–æ–µ –∏–º—è:</label>
            <div class="input-with-btn">
                <input type="text" name="codename" id="codename-input" value="{{ form_data.codename if form_data else '' }}"
                       required placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ...">
                <button type="button" id="generate-name" class="btn-dice" title="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–º—è">üé≤</button>
            </div>
            {% if errors.codename %}
                <div class="error-message">[!] {{ errors.codename }}</div>
            {% endif %}

            <label> –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä:</label>
            <input type="text" name="contact_number" value="{{ form_data.contact_number if form_data else '' }}">
            {% if errors.contact_number %}
                <div class="error-message">[!] {{ errors.contact_number }}</div>
            {% endif %}

            <label>Email:</label>
            <input type="text" name="email" value="{{ form_data.email if form_data else '' }}" required>
            {% if errors.email %}
                <div class="error-message">[!] {{ errors.email }}</div>
            {% endif %}

            <label>–£—Ä–æ–≤–µ–Ω—å –¥–æ–ø—É—Å–∫–∞:</label>
            <select name="access_level_id" required>
                <option value="" disabled selected>-- –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –¥–æ–ø—É—Å–∫–∞ --</option>
                {% for level in levels %}
                    <option value="{{ level.id }}"
                            {% if form_data.access_level_id|string == level.id|string %}selected{% endif %}>
                        {{ level.name }}
                    </option>
                {% endfor %}
            </select>
            {% if errors.access_level_id %}
                <div class="error-message">[!] {{ errors.access_level_id }}</div>
            {% endif %}

            <div style="display: flex; justify-content: space-around; margin-top: 30px;">
                <button type="submit" class="btn-save">–í–Ω–µ—Å—Ç–∏ –≤ –±–∞–∑—É</button>
                <a href="/">
                    <button type="button" class="btn-save">–û—Ç–º–µ–Ω–∞</button>
                </a>
            </div>
        </form>
    </div>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
