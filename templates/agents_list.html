<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ê–≥–µ–Ω—Ç–∞–º–∏</title>
    <<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-wrapper">
                  {% for category, message in messages %}
                    <div class="flash {{ category }}">{{ message }}</div>
                  {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <h1>–°–ï–ö–†–ï–¢–ù–´–ô –ê–†–•–ò–í: –ê–ì–ï–ù–¢–´</h1>
        <nav>
            <div class="search-box">
                <form action="/" method="GET">
                    <input type="text" name="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥–æ–≤–æ–º—É –∏–º–µ–Ω–∏...">
                    <select name="level">
                        <option value="">–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
                        {% for level in levels %}
                        <option value="{{ level.id }}">{{ level.name }}</option>
                        {% endfor %}
                    </select>
                    <button type="submit" class="btn-action">–ù–∞–π—Ç–∏</button>
                </form>

            </div>
            <a href="/add" class="btn">–î–æ–±–∞–≤–∏—Ç—å –∞–≥–µ–Ω—Ç–∞</a>
        </nav>

        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ö–æ–¥–æ–≤–æ–µ –∏–º—è</th>
                    <th>–î–æ—Å—å–µ</th>
                    <th>–ò–∑–º–µ–Ω–∏—Ç—å</th>
                    <th>–£–¥–∞–ª–∏—Ç—å</th>
                </tr>
            </thead>
            <tbody>
                {% for agent in agents %}
                    <tr>
                        <td>{{ agent.id }}</td>
                        <td>{{ agent.codename }}</td>
                        <td class="td-20">
                            <a href="{{ url_for('view_agent', id=agent.id) }}">
                                <img src="{{ url_for('static', filename='img/dossier-icon.svg') }}" class="icons" alt="–î–æ—Å—å–µ">
                            </a>
                        </td>
                        <td class="td-20">
                            <a href="{{url_for('edit_agent', id = agent.id)}}" class="edit">
                                <img src="{{ url_for('static', filename='img/edit-icon.svg') }}" class="icons" alt="–ò–∑–º–µ–Ω–∏—Ç—å">
                            </a>
                        </td>
                        <td class="td-20">
                            <form method="POST" action="{{ url_for('delete_agent', id=agent.id) }}" style="display:inline;">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <button type="submit" class="delete-btn"
                                        onclick="return confirm('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –¥–æ—Å—å–µ –∞–≥–µ–Ω—Ç–∞ {{ agent.codename }}?')">
                                    <img src="{{ url_for('static', filename='img/delete-icon.svg') }}" class="icons" alt="–£–¥–∞–ª–∏—Ç—å">
                                </button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <button id="theme-toggle" class="btn" style="margin-top: 20px;">–°–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º</button>
    </div>

    <div class="emergency-zone">
        <form action="{{ url_for('emergency_wipe') }}" method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <button type="submit" class="btn-wipe" onclick="return confirm('–í–ù–ò–ú–ê–ù–ò–ï! –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –í–°–ï –¥–æ—Å—å–µ?')">
                üö® –°–ï–ö–†–ï–¢–ù–´–ô –†–ï–ñ–ò–ú: –£–ù–ò–ß–¢–û–ñ–ò–¢–¨ –ë–ê–ó–£
            </button>
        </form>
    </div>



    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
